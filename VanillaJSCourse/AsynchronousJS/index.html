<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>Asynchronous JS</h1>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      // const second = () => {
      //     setTimeout(() => {
      //         console.log("async")
      //     },
      //         2000
      //     )
      // }
      // const first = () => {
      //     console.log("Hey There")
      //     second();
      //     console.log("The end")
      // }
      // first();

      //  ES5
      // function getRecipe() {
      //     setTimeout(() => {
      //         const recipeID = [523, 883, 432, 123]
      //         console.log(recipeID)
      //         setTimeout((id) => {
      //             const recipe = {title: 'Tomato', publisher: 'Jonas'}
      //             console.log(`${id}: ${recipe.title}`)
      //             setTimeout(publisher=>{
      //                 const recipe = {title: 'Pizza', publisher: 'Jonas'}
      //                 console.log(`${publisher} ga`)
      //             }, 1500, recipe.publisher)
      //         }, 1500, recipeID[2]);
      //     },
      //     1500
      //     )
      // }

      // getRecipe();

      // ES6

      // PROMISES
      //   const getIDs = new Promise((resolve, reject) => {
      //     setTimeout(() => {
      //       resolve([523, 883, 432, 123]);
      //       reject("error");
      //     }, 1500);
      //   });

      //   const getRecipe = (recID) => {
      //     return new Promise((resolve, reject) => {
      //       setTimeout(
      //         (ID) => {
      //           const recipe = { title: "Tomato", publisher: "Jonas" };
      //           resolve(`${ID}: ${recipe.title}`);
      //         },
      //         1500,
      //         recID
      //       );
      //     });
      //   };
      //   const getRelated = (publisher) => {
      //     return new Promise((resolve, reject) => {
      //       setTimeout(
      //         (pub) => {
      //           const recipe = { title: "Pizza", publisher: "Jonas" };
      //           resolve(`${publisher}:  ${recipe.title}`);
      //         },
      //         1500,
      //         publisher
      //       );
      //     });
      //   };

      // THEN CATCH
      //   getIDs
      //     .then((IDs) => {
      //       console.log(IDs);
      //       return getRecipe(IDs[2]);
      //     })
      //     .then((recipe) => {
      //       console.log(recipe);
      //       return getRelated("recipe.publisher");
      //     })
      //     .then((recipe) => {
      //       console.log(recipe);
      //     })
      //     .catch((error) => {
      //       console.log(error);
      //     });

      // SYNC AWAIT
      // async function runs un background, only in async can use await
      //   async function getRecipesAW() {
      //     const IDs = await getIDs;
      //     console.log(IDs);
      //     const recipe = await getRecipe(IDs[2]);
      //     console.log(recipe);
      //     const related = await getRelated("Jonas");
      //     console.log(related);

      //     return `${recipe} is the best ever`;
      //   }

      //   getRecipesAW().then((rec) => {
      //     console.log(rec);
      //   });
      //   console.log(rec);

      // AJAX

      // axios
      //   .get("http://127.0.0.1:8000/account/register/")
      //   .then((response) => {
      //     return response;
      //   })
      //   .then((res) => console.log(res.data))
      //   .catch((response) => console.log(response));

      async function getRecipesAW() {
        try {
          const IDs = await axios.get(
            "http://127.0.0.1:8000/account/register/"
          );
          const data = await IDs.json();
          console.log(`${data} oke`);

          return IDs;
        } catch (error) {
          console.log(error);
        }
      }

      getRecipesAW().then((rec) => {
        console.log(rec);
      });
      // console.log(rec);
      //   const resp = axios.get("http://127.0.0.1:8000/account/register/");

      //   fetch("http://127.0.0.1:8000/account/register/", {
      //   fetch(
      //     "https://crossorigin.me/https://www.metaweather.com/api/location/2487956/",
      //     {
      //       mode: "no-cors",
      //     }
      //   )
      //     .then((result) => {
      //       console.log(result);
      //       return result.json();
      //     })
      //     .then((res) => {
      //       console.log(res);
      //     })
      //     .catch((error) => {
      //       console.log(error);
      //     });
      //   console.log(fetch("https://www.metaweather.com/api/location/44418/"));
    </script>
  </body>
</html>
